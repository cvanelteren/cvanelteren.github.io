<!DOCTYPE html>
<!-- This site was created with Wowchemy. https://www.wowchemy.com -->
<!-- Last Published: June 21, 2023 --><html lang="en-us" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.7.0 for Hugo" />
  

  
  












  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.047268c6dd09ad74ba54a0ba71837064.css" media="print" onload="this.media='all'">

  
  
  
    
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.2/css/academicons.min.css" integrity="sha512-KlJCpRsLf+KKu2VQa5vmRuClRFjxc5lXO03ixZt82HZUk41+1I0bD8KBSA0fY290ayMfWYI9udIqeOWSu1/uZg==" crossorigin="anonymous" media="print" onload="this.media='all'">
    

    
    
    
    
      
      
    
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.4d5c44e775549a931ece831911e67d73.css" />

  
  
  
    <link rel="stylesheet" href="/css/wowchemy-blocks.min.9c75b36bbbcfc822506293a1489bf6fc.css" />
  

  
  
  
  
  
  
  
    
    
    <link rel="stylesheet" href="/css/libs/chroma/xcode-dark.min.css" title="hl-light" media="print" onload="this.media='all'" >
    <link rel="stylesheet" href="/css/libs/chroma/xcode-dark.min.css" title="hl-dark" media="print" onload="this.media='all'" disabled>
  

  
  


























  
  
  






  <meta name="author" content="Casper van Elteren" />





  

<meta name="description" content="Bootstrapping myself into the web" />



<link rel="alternate" hreflang="en-us" href="https://cvanelteren.github.io/post/d3/" />
<link rel="canonical" href="https://cvanelteren.github.io/post/d3/" />



  <link rel="manifest" href="/manifest.webmanifest" />



<link rel="icon" type="image/png" href="/media/icon_hu14fe9cd784e8f78598c2a5496e7ffbbf_6207_32x32_fill_lanczos_center_3.png" />
<link rel="apple-touch-icon" type="image/png" href="/media/icon_hu14fe9cd784e8f78598c2a5496e7ffbbf_6207_180x180_fill_lanczos_center_3.png" />

<meta name="theme-color" content="#efebda" />










  






<meta property="twitter:card" content="summary_large_image" />

  <meta property="twitter:site" content="@wowchemy" />
  <meta property="twitter:creator" content="@wowchemy" />
<meta property="twitter:image" content="https://cvanelteren.github.io/post/d3/featured.png" />
<meta property="og:site_name" content="Casper van Elteren" />
<meta property="og:url" content="https://cvanelteren.github.io/post/d3/" />
<meta property="og:title" content="From matplotlib to D3 | Casper van Elteren" />
<meta property="og:description" content="Bootstrapping myself into the web" /><meta property="og:image" content="https://cvanelteren.github.io/post/d3/featured.png" /><meta property="og:locale" content="en-us" />

  
    <meta
      property="article:published_time"
      content="2022-02-08T18:09:35&#43;01:00"
    />
  
  
    <meta property="article:modified_time" content="2022-02-08T18:09:35&#43;01:00">
  






    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cvanelteren.github.io/post/d3/"
  },
  "headline": "From matplotlib to D3",
  
  "image": [
    "https://cvanelteren.github.io/post/d3/featured.png"
  ],
  
  "datePublished": "2022-02-08T18:09:35+01:00",
  "dateModified": "2022-02-08T18:09:35+01:00",
  
  "author": {
    "@type": "Person",
    "name": "Casper van Elteren"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "Casper van Elteren",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cvanelteren.github.io/media/icon_hu14fe9cd784e8f78598c2a5496e7ffbbf_6207_192x192_fill_lanczos_center_3.png"
    }
  },
  "description": "Bootstrapping myself into the web"
}
</script>

  

  




  
  
  

  
  

  


  
  <title>From matplotlib to D3 | Casper van Elteren</title>

  
  
  
  











</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="f94f92f1cdd130ca0480a6bd165d9a91" >

  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.fe8634e7d00f14d07fb33caf14cc8e55.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="Close"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="Search...">
        
      </div>

      
      

      

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header header--fixed">
  
  
  
  
  












<header>
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/">Casper van Elteren</a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/">Casper van Elteren</a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>Home</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#posts"><span>Posts</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#projects"><span>Projects</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#talks"><span>Talks</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#featured"><span>Publications</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#contact"><span>Contact</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#navigator"><span>Navigator</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        
          
        
          
        

        
        
        
        <li class="nav-item">
          <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <article class="article">

  






















  
  


<div class="article-container pt-3">
  <h1>From matplotlib to D3</h1>

  

  


<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    Feb 8, 2022
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    11 min read
  </span>
  

  
  
  
  

  
  

</div>

  





</div>


<div class="article-header article-container featured-image-wrapper mt-4 mb-4" style="max-width: 720px; max-height: 275px;">
  <div style="position: relative">
    <img src="/post/d3/featured_hub0730b8bf65325524d85d9d4b27aafde_855267_720x2500_fit_q75_h2_lanczos_3.webp" width="720" height="275" alt="" class="featured-image">
    
  </div>
</div>



  <div class="article-container">

    <div class="article-style">
      <!-- <script src="./test.js"></script> -->
<!-- <div id="d3-example"></div> -->
<!-- <div id="output"></div> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/d3@7"></script> -->
<!-- <script src="./test.js"></script> -->
<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
   <h1 id="table-of-contents">Table of Contents</h1>
<ol>
<li><a href="#org8d7891c">Introduction</a>
<ol>
<li><a href="#org02e061d">TLDR</a></li>
</ol>
</li>
<li><a href="#org9763250">Starting the D3 Journey</a>
<ol>
<li><a href="#org22859dd">Goals</a></li>
<li><a href="#org81e6722">Setting up an environment</a></li>
<li><a href="#org26d41fa">Understanding D3s design</a></li>
<li><a href="#orge855feb">Making the first plot</a></li>
<li><a href="#org650d065">Adding interactivity</a>
<ol>
<li><a href="#orgbcede09">Designing mouseOver</a></li>
<li><a href="#orgbc55fb9">Designing mouseLeave</a></li>
<li><a href="#orgb1c1c86">Designing mouseMove</a></li>
<li><a href="#orgd6b55cd">Bonus: adding a trend line</a></li>
</ol>
</li>
<li><a href="#orgacb8da5">Putting the pieces together</a></li>
</ol>
</li>
<li><a href="#org80c6323">Summary</a>
<ol>
<li><a href="#orgfdeda20">Honorable mentions</a></li>
</ol>
</li>
</ol>
<style>
<p>.links line {
stroke: #999;
stroke-opacity: 0.6;
}</p>
<p>.nodes circle {
stroke: #fff;
stroke-width: 1.5px;
}
</style></p>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<div id="banner"></div>
<script src="./test2.js"></script>
<p><a id="org8d7891c"></a></p>
<h1 id="introduction">Introduction</h1>
<p>Data visualization is  a crucial tool to  gain insights into
data. For  data aficionados it  is a difficult task  to find
the  balance  between  visual prowess  and  meaningful  data
visualization.  My visualization  journey started  in matlab
many years ago. Matlab’s visualization tool are powerful and
are  apart of  many scientist’s  and engineers  toolkit. For
static plots,  matlab’s toolkit is excellent.  However, over
the years  I got a  deeper desire for interactive  tools and
animations. Although this is  very much possible, the nature
of matplotlib’s ecosystem  made it a bit  awkward in dealing
with  complicated  animations.  As years  passed,  I  slowly
transitioned to  the python scientific stack  which prompted
me to  switch to  matlab’s equivalent matplotlib.  As python
gained providence among the scientific community, so did the
need  for interactive  visualizations. The  notebook culture
grew,  and  so did  the  ports  to  allow matplotlib  to  be
visualized in interactive contexts. Matplotlib has served me
well for many  years; having its roots  in matlab’s plotting
ecosystem,  it  moved more  and  more  to object  orientated
design familiar  to many  pythonistas. However, I  was still
rather unhappy  with sharing matplotlib code.  Preferable, I
would like to  host the visualizations on a  website where a
user can interact and explore  with the data. For the python
ecosystem, this always requires a python interpreter running
on a server somewhere. I was aware of D3 for many years, and
was rather impressed by the visuals that it generates. After
doing several tutorial online over  the years, I felt rather
empty and left  with a lack of  understanding. Many tutorial
allow  you  to copy  paste,  but  not understand  <em>how</em>  the
visualization work  under the hood.  In the year 2022  it is
finally time to pick-up on  my previous attempts to learn D3
(and  javascript). The  focus will  be for  matplotlib users
that are interested in learning D3. I assume that the reader
is familiar  with base  programming. I  am not  too familiar
with  javascript,  and  as  such learning  that  will  be  a
secondary goal  for me. In  the end, I  aim to make  a graph
visualization tool with the use of  D3. In this post, I will
guide the reader in my process  and share my thoughts on how
the  code  works  internally. For  background  knowledge,  I
assume the reader is  familiar with matplotlib and generally
programming.</p>
<p><a id="org02e061d"></a></p>
<h2 id="tldr">TLDR</h2>
<p>I wrote down some thoughts on making plots in D3 by using my
knowledge  from  matplotlib.  The   code  can  be  found  at
<a href="http://cvanelteren.github.io/post/d3/first_plot.js" target="_blank" rel="noopener">http://cvanelteren.github.io/post/d3/first_plot.js</a> The final
plot is given below in <a href="#orgacb8da5">2.6</a>.</p>
<p><a id="org9763250"></a></p>
<h1 id="starting-the-d3-journey">Starting the D3 Journey</h1>
<p><a id="org22859dd"></a></p>
<h2 id="goals">Goals</h2>
<ul>
<li><input disabled="" type="checkbox"> Familiarize with D3 ecosystem
<ul>
<li><input disabled="" type="checkbox"> Make simple line plot</li>
<li><input disabled="" type="checkbox"> Make simple scatter plot</li>
</ul>
</li>
</ul>
<p><a id="org81e6722"></a></p>
<h2 id="setting-up-an-environment">Setting up an environment</h2>
<p>In  order to  work with  d3, it  is possible  to install  it
locally  with `npm`  (e.g. `npm  install -g  d3`) or  use it
directly  from  the  Contend Delivery  Network  (CDN).  This
latter option effectively acts as an import statement that a
device connected to  the internet could use. I  will use the
latter  option  as  the  target  is  running  visualizations
online. For more information one could follow <a href="https://www.tutorialsteacher.com/d3js/setup-d3js-development-environment" target="_blank" rel="noopener">this tutorial</a>.
for setting it up locally. A typical modern website consists
of  three components:  the webpage  content, the  looks, and
possible external scripts. The workhorse for modern websites
is  Hyper  Markum Language  (HTML);  it  defines the  basics
structure of a  webpage. We will be writing  minimal HTML in
this post. All that is necessary to know is that HTML is the
“core” of how website determines where what goes. Javascript
can be used  to dynamically serve content  by interacting or
writing  HTML.  How  a  website  looks  is  controlled  with
Cascading Style Sheets or CSS.  The files are used to change
things like color, size of an  image and so on. Again CSS is
not the  focus here, it is  merely important to be  aware of
the base components  as D3 will interact  with them. Lastly,
javascript is in  essence the programming for the  web. I am
not an  expert in  any web-based development  and as  such I
would recommend elsewhere  for learning the ins  and outs of
javascript. My goal here is to  make pretty plots and use my
extensive  programming experience  to  just  figure out  the
syntax.</p>
<p>A minimal HTML file for D3 would look like:</p>
<pre><code>&lt;!-- file: hello_d3.html --&gt;
&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;!-- get module from cdn --&gt;
  &lt;script src=&quot;https://d3js.org/d3.v6.min.js&quot;&gt;&lt;/script&gt;
  &lt;!-- or load it locally --&gt;
  &lt;!-- &lt;script src=&quot;../d3.min.js&quot;&gt;&lt;/script&gt; --&gt;
&lt;/head&gt;
&lt;body&gt;
<p>&lt;script&gt;
&lt;!&ndash; write your d3 code here.. &ndash;&gt;
&lt;script src=&quot;./first_plot.js&quot;&gt;&lt;/script&gt;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></p>
<p>You can  view this file  by opening  this file in  a browser
(e.g. `firefox hello<sub>d3.html</sub>` or  equivalent for the browser
you  are  using). The  file  should  be empty.  Let’s  start
filling it up with D3 goodiness!</p>
<p><a id="org26d41fa"></a></p>
<h2 id="understanding-d3s-design">Understanding D3s design</h2>
<p>Traditional  matplotlib  had   concept  of  functions,  i.e.
`plt.figure()` would open a figure and `plt.plot` would plot
a line  plot in  the most  recent figure.  Modern matplotlib
uses an object oriented approach. A figure would opened like</p>
<p>There  is a  concept of  the “figure”  that hosts  different
subplots which each  hold different axes. These  axes can be
of   different  types   such  as   geographic,  polar,   the
traditional Euclidean  plane, and  so on.  There is  a clear
hierarchy on  what holds  what. In  matplotlib the  axes are
essentially which  interacts with the data.  In contrast, D3
assigns data attributes directly  to images. That is, inside
a “canvas” (plt.figure) scalable  vector graphics (svgs) are
created   which  gets   as   attributes  data   coordinates.
Effectively, D3  allows you to make  a cake but you  have to
provide  all  the  ingredients:  axes  are  not  created  by
default.</p>
<p><a id="orge855feb"></a></p>
<h2 id="making-the-first-plot">Making the first plot</h2>
<p>Let’s  start  with  making  a scatter  plots.  We  start  by
creating a figure. I will write  the code for the first plot
in a  file names `first\<sub>plot.js</sub>`  and will call it  from the
html we just created above, yielding:</p>
<pre><code>&lt;!-- file: hello_d3.html --&gt;
&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;!-- get module from cdn --&gt;
  &lt;script src=&quot;https://d3js.org/d3.v7.min.js&quot;&gt;&lt;/script&gt;
  &lt;!-- or load it locally --&gt;
  &lt;!-- &lt;script src=&quot;../d3.min.js&quot;&gt;&lt;/script&gt; --&gt;
  &lt;script src=&quot;./first_plot.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
<p>&lt;script&gt;
&lt;!&ndash; write your d3 code here.. &ndash;&gt;
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></p>
<p>Next, we  create our  figure by selecting  the `#first_ plot`
div and  and adding a  graphic (svg) to  it. The svg  is now
empty, but we will soon fill it with some data.</p>
<pre><code>// define margins
 const margin = {top: 10,
                right: 30,
                bottom: 30,
                left: 60};
const width = 400 - margin.left - margin.right;
const height = 400 - margin.top - margin.bottom;
<p>// create canvas and select the graphics
var svg = d3.select(&quot;#first_plot&quot;)
.append(&quot;svg&quot;)
.attr(&quot;width&quot;, width + margin.left + margin.right)
.attr(&quot;height&quot;, height + margin.top + margin.bottom)
.append(&quot;g&quot;)
.attr(&quot;transform&quot;, <code>translate(${margin.left}, ${margin.top})</code>)
</code></pre></p>
<p>In this snippet we select a div in the html in which we want
to plot our  graph. We specify its width and  height and add
an svg  graphic to it.  In addition,  we append a  new group
(indicated by `g`) that is transformed (placed) a little bit
from the left and top. Playing around with the parameters is
highly  encourage to  see how  it affects  the plots.</p>
<p>Next, let’s add some data. Data  can be loaded from a csv or
json  files,  I  opted  here to  learn  something  how  list
comprehensions can  be emulated  in javascript. I  create an
`Array` type  and specify  its length.  Then I  populate the
array with a function. One can read this procedure similarly
to a  list comprehension. That  is, <code>[some_func(x) for  x in range(100)]</code>.</p>
<pre><code>// make scatter
var data = Array.from({length: 1000}, (_, idx) =&gt; {
    return {x: idx * 0.1/ ( 2 * 3.141592 ),
            y:  (Math.sin(idx * 0.1/ ( 2 * 3.141592 )) +  1 * Math.random())}
    });
</code></pre>
<p>In order  to complete the  figure, we  need to tell  D3 what
axes to map the data on. In  order to do this, we create two
axes (x, y) to form a Euclidean plane.</p>
<pre><code>// construct axes
const x = d3.scaleLinear()
      .domain([0, 100])
      .range([ 0, width ]);
<p>const y = d3.scaleLinear()
.domain([ 0, 100])
.range([ height, 0 ]);
</code></pre></p>
<p>Note that the coordinate system  starts from a imaginary box
on the top  left. Hence, the y-axis needs to  be moved (with
the `.range` property) down  by `height` which was specified
in the canvas  specs. Similarly, the x-axis  spans the width
of our canvas.</p>
<p>The axes  need to  be added  to our  svg. For  a traditional
plot, the  x-axis has to be  moved `height` down to  yield a
traditional xy plane.</p>
<pre><code>// add axes
svg.append(&quot;g&quot;)
   .attr(&quot;transform&quot;, `translate(0, ${height})`)
   .call(d3.axisBottom(x));
<p>svg.append(&quot;g&quot;)
.call(d3.axisLeft(y));
</code></pre></p>
<p>Finally, we  add  the images  to  the svg  by
specifying another  grounp `g` and popuplating  it using the
`data` function.  The centers of the  circles are specificed
by  maps  again. The  funny  `d`  syntax specifies  a  lamba
function. This is the same  as `lambda x: [some expression]`
in python. Finally, attributes such  as the color and radius
(`r`) are set.</p>
<pre><code>var scatter = svg.append(&quot;g&quot;)
    .selectAll(&quot;dot&quot;)
    .data(data)
    .join(&quot;circle&quot;)
    .attr(&quot;cx&quot;, d =&gt; x(d.x))
    .attr(&quot;cy&quot;, d =&gt; y(d.y))
    .attr(&quot;r&quot;, 2)
    .style(&quot;fill&quot;, &quot;#729B79&quot;);
</code></pre>
<p>We are now  ready to plot! Running the final  HTML code in a
browser should  yield a fancy  sine plot with  some noise.</p>
<p><a id="org650d065"></a></p>
<h2 id="adding-interactivity">Adding interactivity</h2>
<p>The plot above is a bit boring. Where D3 really shines is in
its interactivity. What if we  want to know exactly what the
xy  coordinates are  in  the  plot? Let’s  find  out how  to
achieve this.</p>
<p>We add  a hover tool to  display the x,y coordinates  of the
generated data. This  involves adding another div  to put in
some HTML. We  start by setting the opacity to  0, hiding it
from view and “popping” it back  into view when a data point
is selected.</p>
<pre><code>// create a tooltip
var Tooltip = d3.select(&quot;#first_plot&quot;)
  .append(&quot;div&quot;)
  .style(&quot;opacity&quot;, 0)
  .attr(&quot;class&quot;, &quot;tooltip&quot;)
  .style(&quot;background-color&quot;, &quot;gray&quot;)
  .style(&quot;border&quot;, &quot;solid&quot;)
  .style(&quot;border-width&quot;, &quot;2px&quot;)
  .style(&quot;border-radius&quot;, &quot;5px&quot;)
  .style(&quot;padding&quot;, &quot;5px&quot;)
</code></pre>
<p>Next, we  have to  define the behavior  what happens  to the
toolbar (and the  dots) when the mouse hovers  over it. This
means we have to create 3 functions</p>
<ul>
<li>mouseOver: when the mouse moves over the point</li>
<li>mouseLeave: when the mouse leaves the point</li>
<li>mouseMove: when the mouse moves</li>
</ul>
<p><a id="orgbcede09"></a></p>
<h3 id="designing-mouseover">Designing mouseOver</h3>
<p>In  order to  let  the  datapoint shine,  we  turn down  the
opacity  and  highlight  the selected  point.  Finally,  the
tooltip has to popup, reflecting the data coordinates.</p>
<pre><code>let mouseOver = function(d) {
  // turn down opacity of all other circles
  d3.selectAll(&quot;circle&quot;)
    .transition()
    .duration(200)
    .style(&quot;opacity&quot;, .5)
<p>// make selection yellow
d3.select(this)
.transition()
.duration(200)
.style(&quot;opacity&quot;, 1)
.style(&quot;fill&quot;, &quot;yellow&quot;)</p>
<p>// update tooltip
Tooltip
.style(&quot;opacity&quot;, 1)
}
</code></pre></p>
<p><a id="orgbc55fb9"></a></p>
<h3 id="designing-mouseleave">Designing mouseLeave</h3>
<p>This  does the  effective  opposite of  the function  above;
turning down up the opacity of all other dots.</p>
<pre><code>let mouseLeave = function(d) {
  d3.selectAll(&quot;circle&quot;)
    .transition()
    .duration(200)
    .style(&quot;opacity&quot;, .8)
<p>d3.select(this)
.transition()
.duration(200)
// .style(&quot;fill&quot;, &quot;transparent&quot;)
.style(&quot;fill&quot;, &quot;#729B79&quot;)</p>
<p>// update tooltip
Tooltip
.style(&quot;opacity&quot;, 0)
}
</code></pre></p>
<p><a id="orgb1c1c86"></a></p>
<h3 id="designing-mousemove">Designing mouseMove</h3>
<p>This function removes  the toolbox when the  mouse is moved.
This makes sure the toolbox does not confuse the enduser.</p>
<pre><code>let mouseMove = function(event, d) {
  Tooltip
      .html(`x: ${d.x} &lt;br&gt; y: ${d.y}`) // print inside the tooltip
      .style(&quot;left&quot;, event.pageX + &quot;px&quot;) // move the toolbox to the correct position
      .style(&quot;top&quot;, event.pageY + &quot;px&quot;)
  }
</code></pre>
<p><a id="orgd6b55cd"></a></p>
<h3 id="bonus-adding-a-trend-line">Bonus: adding a trend line</h3>
<p>As a  bonus we add  a trend line to  show how well  our data
fits a trend.</p>
<pre><code>// trend curving
let c = d3.curveNatural;
svg
  .append(&quot;path&quot;)
  .datum(data)
  .attr(&quot;stroke&quot;, &quot;#475B63&quot;)
  .attr(&quot;fill&quot;, &quot;transparent&quot;)
  .attr(&quot;stoke-width&quot;, 1.5)
  .attr(&quot;d&quot;, d3.line()
        .x(d =&gt; x(d.x))
        .y(d =&gt; y(d.y))
        .curve(c)
       )
</code></pre>
<p><a id="orgacb8da5"></a></p>
<h2 id="putting-the-pieces-together">Putting the pieces together</h2>
<p>Next, we  need to tell D3  to add this functionality  to the
dots only. We add the  functions to the scatter dots defined
above, yielding:</p>
<pre><code>var scatter = svg.append(&quot;g&quot;)
  .selectAll(&quot;dot&quot;)
  .data(data)
  .join(&quot;circle&quot;)
  .attr(&quot;cx&quot;, d =&gt; x(d.x))
  .attr(&quot;cy&quot;, d =&gt; y(d.y))
  .attr(&quot;r&quot;, 5)
  .style(&quot;fill&quot;, &quot;blue&quot;)
  .on(&quot;mouseover&quot;, mouseOver) // new
  .on(&quot;mouseleave&quot;, mouseLeave) // new
  .on(&quot;mousemove&quot;, mouseMove) // new
</code></pre>
<div id="first_plot"></div>
<script src="./first_plot.js"></script>
<p>We have  now created an  interactive scatter plot!  The TLDR
code          can           be          found          under
<a href="http://cvanelteren.github.io/post/d3/first_plot.js" target="_blank" rel="noopener">http://cvanelteren.github.io/post/d3/first_plot.js</a>.</p>
<p><a id="org80c6323"></a></p>
<h1 id="summary">Summary</h1>
<p>We have seen how to create  a simple plot in D3. Compared to
matplotlib  D3  is  more   verbose;  everything  has  to  be
specified. Some packages do exist that build on top of D3 to
prevent this verboseness (e.g.  Chart.js), however, for full
control  one  needs to  dive  in  deep  with D3.  The  major
advantage for D3 is its portable  (it can exist in the web),
and interactivity.  Building a shiny dashboard  to visualize
your  major findings  for data  analysts and  scientists are
hard to  beat. For  producing quality publication  graphs, I
would still stick to matplotlib however. In summary we have:</p>
<ul>
<li>D3 allows for high quality data-driven documents;
<ul>
<li>May form the basis for dashboard;</li>
</ul>
</li>
<li>Learning curve is relatively high and requires more amount
of coding than matplotlib;
<ul>
<li>D3 allow  for full  control which comes  at the  cost of
verbose coding practices;</li>
<li>It is flexible, and can produce beautiful graphs (see <a href="https://www.d3-graph-gallery.com/index.html" target="_blank" rel="noopener">here</a>);</li>
</ul>
</li>
<li>Interactivity  is  a  real  benefit  for  D3  compared  to
matplotlib.</li>
</ul>
<p>In future  posts I will  explore the data  visualizations on
networks a bit more. See you in the next one!</p>
<p><a id="orgfdeda20"></a></p>
<h2 id="honorable-mentions">Honorable mentions</h2>
<p>These packages  exist for making  pretty plots in  python or
can convert to content that can be hosted on the web.</p>
<ul>
<li><a href="http://mpld3.github.io/" target="_blank" rel="noopener">mpld3</a> converts matplotlib figures to D3.</li>
<li><a href="https://plotly.com/dash/" target="_blank" rel="noopener">plotly  (and  dash)</a>  use   plotly  to  make  nice  looking
dashboard.</li>
<li><a href="https://docs.bokeh.org/en/latest/index.html" target="_blank" rel="noopener">Bokeh</a>: D3 for python</li>
<li><a href="https://proplot.readthedocs.io/en/latest/" target="_blank" rel="noopener">Proplot</a>: matplotlib but with sensible defaults</li>
<li><a href="https://seaborn.pydata.org/" target="_blank" rel="noopener">Seaborn</a>: additional functionality on top of matplotlib</li>
</ul>
</body>
</html>

    </div>

    





<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/d3/">D3</a>
  
</div>



<div class="share-box">
  <ul class="share">
    
      
      
      
        
      
      
      
      
      
      
      
        
      
      <li>
        <a href="mailto:?subject=From%20matplotlib%20to%20D3&amp;body=https%3A%2F%2Fcvanelteren.github.io%2Fpost%2Fd3%2F" target="_blank" rel="noopener" class="share-btn-email" aria-label="envelope">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=https%3A%2F%2Fcvanelteren.github.io%2Fpost%2Fd3%2F&amp;title=From&#43;matplotlib&#43;to&#43;D3" target="_blank" rel="noopener" class="share-btn-linkedin" aria-label="linkedin-in">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
  </ul>
</div>











  
  



  
  
  
    
  
  
  
  <div class="media author-card content-widget-hr">
    
      
      <a href="https://cvanelteren.github.io"><img class="avatar mr-3 avatar-circle" src="/authors/casper-van-elteren/avatar_huf7a4b9acc98ab48e41d97955884fc455_120959_270x270_fill_q75_lanczos_center.jpg" alt="Casper van Elteren"></a>
    

    <div class="media-body">
      <h5 class="card-title"><a href="https://cvanelteren.github.io">Casper van Elteren</a></h5>
      <h6 class="card-subtitle">Computational scientist | Data scientist | Tinkerer</h6>
      <p class="card-text">I am a computational scientist interested in data analysis, visualization and software engineering.</p>
      <ul class="network-icon" aria-hidden="true">
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="/#contact" >
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://www.linkedin.com/in/casper-van-elteren-07934774/" target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="https://scholar.google.nl/citations?user=kbEhuPwAAAAJ&amp;hl=en" target="_blank" rel="noopener">
        <i class="ai ai-google-scholar"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://github.com/cvanelteren" target="_blank" rel="noopener">
        <i class="fab fa-github"></i>
      </a>
    </li>
  
    
    
    
      
    
    
    
    
    
      
    
    <li>
      <a href="https://stackoverflow.com/users/7343721/globaltraveler" target="_blank" rel="noopener">
        <i class="fab fa-stack-overflow"></i>
      </a>
    </li>
  
    
    
    
    
    
    
    
      
    
    <li>
      <a href="/cv" >
        <i class="ai ai-cv"></i>
      </a>
    </li>
  
</ul>

    </div>
  </div>


















  </div>
</article>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  












  
  
  
  
  













  
  
  

  
  
    
  
  
    
  

  

  
  <p class="powered-by copyright-license-text">
    © 2023 Me. This work is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank">CC BY NC ND 4.0</a>
  </p>
  

  <p class="powered-by footer-license-icons">
    <a href="https://creativecommons.org/licenses/by-nc-nd/4.0" rel="noopener noreferrer" target="_blank" aria-label="Creative Commons">
      <i class="fab fa-creative-commons fa-2x" aria-hidden="true"></i>
      <i class="fab fa-creative-commons-by fa-2x" aria-hidden="true"></i>
      
        <i class="fab fa-creative-commons-nc fa-2x" aria-hidden="true"></i>
      
      
        <i class="fab fa-creative-commons-nd fa-2x" aria-hidden="true"></i>
      
    </a>
  </p>





  <p class="powered-by">
    
    
    
      
      
      
      
      
      
      Published with <a href="https://wowchemy.com/?utm_campaign=poweredby" target="_blank" rel="noopener">Wowchemy</a> — the free, <a href="https://github.com/wowchemy/wowchemy-hugo-themes" target="_blank" rel="noopener">open source</a> website builder that empowers creators.
    
  </p>
</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.1d4346c6f7d46c340dc0a9058dd85c13.js"></script>




  

  
  

  













  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdn.jsdelivr.net/gh/krisk/Fuse@v3.2.1/dist/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/gh/julmot/mark.js@8.11.1/dist/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":true}</script>



  <script src="/js/wowchemy-headroom.db4755770454eb63685f8de785c0a172.js" type="module"></script>









  
  


<script src="/en/js/wowchemy.min.c84202fca2a6efbbecbaf0e8358c1d51.js"></script>







  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        
        <pre><code></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>


  <script src="/js/wowchemy-publication.68f8d7090562ca65fc6d3cb3f8f2d2cb.js" type="module"></script>


















</body>
</html>
